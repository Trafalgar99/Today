# 2020.10.9

## 单词x100

## Node --- Express

1. express结合multer上传图片

```js
//安装multer
npm install --save multer

//必须为表单添加属性
<form action='xxx' method='post' ectype="multipart/form-data"> </form>
//引入
let multer = require('multer');
let storage = multer.diskStorage({
    //配置上传的目录
    destination: function (req,file,cb){
        cb(null,'/tmp/my-uploads')
    },
    //修改上传后的文件名
    filename: function(req,file,cb){
        //获取上传文件的后缀名
        let extname = path.extname(file.originalname);
        cb(null,file.fieldname+'-'+Date.now()++extname)
    }
});
//处理路由
router.post('/doAdd',upload.single('pic'),(req,res)=>{
    req.file() // 
})
```

